<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trippin' - Manage Trip</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <script>
        // Load trip data from sessionStorage and display in header
        document.addEventListener('DOMContentLoaded', () => {
            const tripData = JSON.parse(sessionStorage.getItem('selectedTrip'));
            if (tripData) {
                document.getElementById('tripHeader').textContent = `Manage Trip: ${tripData.destination}`;
                document.getElementById('tripDates').textContent = `${tripData.start_date} to ${tripData.end_date}`;
                console.log("Managing trip with ID:", tripData.id); // Correctly log trip ID
            } else {
                document.getElementById('tripHeader').textContent = 'No Trip Selected';
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <header class="section">
            <h1 id="tripHeader" class="trip-header">Manage Trip</h1>
            <p id="tripDates" class="trip-dates"></p>
        </header>

        <h2 class="section-title">Flights</h2>
        <section class="section" id="flightsSection">
            <div id="flightContainer">
                <p id="noFlightsMessage">You currently have no flights.</p>
            </div>
            <button id="addFlightButton" class="button">Add Flight</button>
        </section>

        <h2 class="section-title">Expenses</h2>
        <section class="section" id="expensesSection">
            <div id="expenseContainer">
                <p id="noExpensesMessage">You currently have no expenses.</p>
            </div>
            <button id="addExpenseButton" class="button">Add Expense</button>
        </section>

        <!-- Add Expense Modal -->
        <div id="addExpenseModal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <h2>Add Expense</h2>
                <form id="addExpenseForm">
                    <label for="reason">Reason:</label>
                    <input type="text" id="reason" name="reason" required>

                    <label for="amount">Amount:</label>
                    <input type="number" id="amount" name="amount" required>

                    <label for="date">Date:</label>
                    <input type="date" id="date" name="date" required>

                    <label for="currency">Currency:</label>
                    <select id="currency" name="currency" required>
                        <option value="" disabled selected>Loading currencies...</option>
                    </select>

                    <label for="receipt">Upload Receipt:</label>
                    <input type="file" id="receipt" name="receipt">

                    <div class="form-buttons">
                        <button type="submit" class="button">Save</button>
                        <button type="button" id="closeAddExpenseModal" class="button">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="assets/js/scripts.js"></script>
</body>
</html>